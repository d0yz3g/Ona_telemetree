from typing import Dict, List, Union, Tuple, Any, Optionalimport logging# Настройка логированияlogger = logging.getLogger(__name__)# Демо-вопросы для первоначального знакомстваDEMO_QUESTIONS = [    {        "id": "name",        "text": "Как тебя зовут?",        "type": "text"    },    {        "id": "age",        "text": "Сколько тебе лет?",        "type": "text"    },    {        "id": "birthdate",        "text": "Какая у тебя дата рождения? (формат: ДД.ММ.ГГГГ)",        "type": "text"    },    {        "id": "birthplace",        "text": "Где ты родился/родилась? (город, страна)",        "type": "text"    },    {        "id": "timezone",        "text": "В каком часовом поясе ты находишься? (например, UTC+3 для Москвы)",        "type": "text"    }]# Тест 2.0 - 34 вопроса из файла vasini_questions.md с вариантами ответов и интерпретациямиVASINI_QUESTIONS = [    {        "id": "vasini_1",        "text": "Что ты чувствуешь, когда смотришь в своё будущее?",        "type": "choice",        "options": {            "A": "Воодушевление. Будущее манит как архитектура нового мира",            "B": "Напряжение. Я не хочу думать о том, чего ещё нет",            "C": "Конкретику. Я мыслю шагами, а не образами",            "D": "Привязанность к настоящему. Я живу здесь и сейчас"        },        "interpretations": {            "A": "Ты действуешь из будущего, а не из настоящего. Ты не фантазируешь — ты проектируешь. Ты не ждёшь вдохновения — ты уже живёшь в мире, который другие только начинают воображать. Это встроенная функция прогностики, а не идеализм. Твоё «завтра» — это топливо «сегодня».",            "B": "У тебя защитный фильтр от неопределённости. Будущее кажется слишком зыбким — и ты предпочитаешь реальные точки опоры. Это не слабость, а адаптивный механизм к хаосу. Но он отключает дальнее зрение, если не перезагрузить внутреннюю безопасную среду.",            "C": "У тебя мышление системного исполнителя. Не образы, а действия. Не фантазии, а модели. Ты способна строить мосты — но только если знаешь, куда они ведут. Это фокус на процессе, а не на горизонте. Это инженер внутри архитектора.",            "D": "У тебя дом в настоящем. Ты живёшь моментом и не ускользаешь в симуляции будущего. В этом сила, если ты создаёшь глубину здесь. Но это может стать якорем, если избежать будущего — это способ спрятаться от необходимости роста."        }    },    {        "id": "vasini_2",        "text": "Как в тебе рождаются идеи?",        "type": "choice",        "options": {            "A": "Я скачиваю их как поток — будто через меня кто-то говорит",            "B": "Они приходят через образы, метафоры, цветовые связи",            "C": "Я вижу структуры, которые соединяют несвязанное",            "D": "Я беру идею из воздуха и превращаю в систему"        },        "interpretations": {            "A": "Ты — приёмник, не автор. У тебя нет «я придумала» — у тебя «я услышала». Ты входишь в канал, а идеи протекают сквозь. Ты — транслятор. Если перекрыть поток — система падает. Сила в доверии без контроля.",            "B": "Ты синестетик смыслов. Идеи в тебе не из логики — они из образов, цвета, ощущения. Ты видишь мысль в форме. Это не мышление — это внутренний дизайнер смыслов. Ты переводишь абстрактное в чувственное.",            "C": "Ты архитектор связей. Твоя сила — объединять то, что не соединяется. Ты находишь мост между полюсами. Ты не придумываешь — ты распознаёшь. Это идеация высокого уровня: не "создаю", а "вижу, как всё работает вместе".",            "D": "Ты визионер-реализатор. Ты не любишь просто идею — тебе нужно её закрепить. Построить. Проверить. Ты не романтик, а синтезатор систем: видишь импульс — превращаешь в механизм. Это редкое сочетание мечты и процесса."        }    },    {        "id": "vasini_3",        "text": "Как ты ощущаешь своё влияние на других людей?",        "type": "choice",        "options": {            "A": "Анализирую проблему, ищу логическое решение",            "B": "Доверяю интуиции и внутренним ощущениям",            "C": "Сохраняю спокойствие и ищу практический выход",            "D": "Рассматриваю ситуацию с разных сторон, ищу необычные решения"        },        "interpretations": {            "A": "Отлично! Твой аналитический подход помогает находить эффективные решения сложных проблем.",            "B": "Прекрасно! Твоя интуиция - надежный внутренний компас в запутанных ситуациях.",            "C": "Замечательно! Твое спокойствие и практичность помогают преодолевать трудности.",            "D": "Великолепно! Твоя способность видеть ситуацию под разными углами открывает новые возможности."        }    },    {        "id": "vasini_4",        "text": "Что вам важнее в работе?",        "type": "choice",        "options": {            "A": "Четкие инструкции и понятные ожидания",            "B": "Гармоничная атмосфера и хорошие отношения в коллективе",            "C": "Возможность проявить лидерские качества",            "D": "Пространство для творчества и экспериментов"        },        "interpretations": {            "A": "Отлично! Твоя любовь к ясности и структуре делает рабочий процесс более эффективным.",            "B": "Прекрасно! Твоя забота о гармонии создает благоприятную атмосферу для всех.",            "C": "Замечательно! Твои лидерские качества помогают команде двигаться к успеху.",            "D": "Великолепно! Твой творческий дух способствует инновациям и развитию."        }    },    {        "id": "vasini_5",        "text": "Как вы принимаете решения?",        "type": "choice",        "options": {            "A": "Опираясь на факты и логический анализ",            "B": "Учитывая чувства и потребности всех участников",            "C": "Взвешивая практические последствия",            "D": "Доверяя интуиции и внутреннему голосу"        },        "interpretations": {            "A": "Отлично! Твой логический подход обеспечивает обоснованность принимаемых решений.",            "B": "Прекрасно! Твое внимание к чувствам других делает решения более гармоничными.",            "C": "Замечательно! Твой практический подход помогает предвидеть последствия решений.",            "D": "Великолепно! Твоя интуиция часто ведет к неожиданно удачным решениям."        }    },    {        "id": "vasini_6",        "text": "Что для вас наиболее ценно?",        "type": "choice",        "options": {            "A": "Порядок, структура и предсказуемость",            "B": "Гармония, глубокие отношения и внутренний баланс",            "C": "Достижения, эффективность и конкретные результаты",            "D": "Творчество, уникальность и аутентичность"        },        "interpretations": {            "A": "Отлично! Твоя ценность порядка создает надежную основу для движения вперед.",            "B": "Прекрасно! Твое стремление к гармонии обогащает жизнь тебя и окружающих.",            "C": "Замечательно! Твоя нацеленность на результат помогает достигать значимых целей.",            "D": "Великолепно! Твоя приверженность творчеству делает жизнь яркой и аутентичной."        }    },    {        "id": "vasini_7",        "text": "Какую роль вы обычно берете на себя в группе?",        "type": "choice",        "options": {            "A": "Аналитик или эксперт, предлагающий обоснованные решения",            "B": "Миротворец, заботящийся о гармонии и поддержке других",            "C": "Лидер или организатор, направляющий группу к цели",            "D": "Генератор идей, предлагающий новые подходы"        },        "interpretations": {            "A": "Отлично! Твои аналитические способности обеспечивают группе надежную основу для решений.",            "B": "Прекрасно! Твой дар гармонизации отношений делает работу группы более приятной и эффективной.",            "C": "Замечательно! Твои лидерские качества помогают группе достигать поставленных целей.",            "D": "Великолепно! Твоя способность генерировать идеи открывает для группы новые возможности."        }    },    {        "id": "vasini_8",        "text": "Что вас выводит из равновесия?",        "type": "choice",        "options": {            "A": "Беспорядок, неточность и нелогичность",            "B": "Конфликты, напряжение и бесчувственность",            "C": "Неэффективность, отсутствие результатов",            "D": "Рутина, ограничения и узкие рамки"        },        "interpretations": {            "A": "Отлично! Твое стремление к порядку и логике помогает создавать эффективные системы.",            "B": "Прекрасно! Твоя чувствительность к атмосфере помогает создавать гармоничное окружение.",            "C": "Замечательно! Твоя ориентация на результат способствует постоянному прогрессу.",            "D": "Великолепно! Твоя потребность в свободе позволяет находить нестандартные решения."        }    },    {        "id": "vasini_9",        "text": "Как вы восстанавливаете энергию?",        "type": "choice",        "options": {            "A": "Через интеллектуальную деятельность и размышления",            "B": "Через глубокое общение или медитативные практики",            "C": "Через физическую активность и достижение целей",            "D": "Через творчество и новые впечатления"        },        "interpretations": {            "A": "Отлично! Твой интеллектуальный подход к восстановлению обогащает твой внутренний мир.",            "B": "Прекрасно! Твое умение находить гармонию помогает поддерживать внутренний баланс.",            "C": "Замечательно! Твоя активность заряжает тебя энергией для новых достижений.",            "D": "Великолепно! Твой творческий подход к отдыху наполняет жизнь яркими красками."        }    },    {        "id": "vasini_10",        "text": "Что вас привлекает в других людях?",        "type": "choice",        "options": {            "A": "Интеллект, логика и компетентность",            "B": "Эмпатия, искренность и глубина",            "C": "Целеустремленность, решительность и надежность",            "D": "Оригинальность, креативность и страсть"        },        "interpretations": {            "A": "Отлично! Твое внимание к интеллектуальным качествам обогащает твой круг общения.",            "B": "Прекрасно! Твое ценение глубины в отношениях создает прочные эмоциональные связи.",            "C": "Замечательно! Твое уважение к целеустремленности вдохновляет и тебя, и окружающих.",            "D": "Великолепно! Твоя любовь к оригинальности делает твою жизнь яркой и интересной."        }    },    {        "id": "vasini_11",        "text": "Какое высказывание больше всего про вас?",        "type": "choice",        "options": {            "A": "Я ценю точность и логику во всем",            "B": "Для меня важно внутреннее состояние и гармония",            "C": "Я стремлюсь к конкретным результатам и достижениям",            "D": "Я всегда ищу новые идеи и возможности"        },        "interpretations": {            "A": "Отлично! Твоя ценность точности способствует качественным результатам в любом деле.",            "B": "Прекрасно! Твое внимание к внутреннему состоянию создает основу для гармоничной жизни.",            "C": "Замечательно! Твоя ориентация на результат помогает постоянно двигаться вперед.",            "D": "Великолепно! Твой поиск новых идей открывает удивительные перспективы и возможности."        }    },    {        "id": "vasini_12",        "text": "Каким образом вы обрабатываете информацию?",        "type": "choice",        "options": {            "A": "Систематизирую и анализирую, выстраивая логические связи",            "B": "Воспринимаю интуитивно, обращая внимание на эмоциональные аспекты",            "C": "Оцениваю практическую ценность и применимость",            "D": "Ищу необычные связи и новые смыслы"        },        "interpretations": {            "A": "Отлично! Твой аналитический подход помогает глубоко понимать суть вещей.",            "B": "Прекрасно! Твоя чувствительность к эмоциональным аспектам обогащает восприятие.",            "C": "Замечательно! Твое внимание к практичности делает информацию действительно полезной.",            "D": "Великолепно! Твоя способность находить необычные связи порождает новые идеи и решения."        }    }, 